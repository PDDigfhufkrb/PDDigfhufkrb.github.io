<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Оплата - ПДД Шпаргалки</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-5">
        <div class="row justify-content-center">
            <div class="col-md-6">
                <h4 class="text-center mb-4">Оплата шпаргалки ПДД</h4>
                <p class="text-center text-muted">99 рублей</p>

                <!-- КОД ЮKASSA С ДОБАВЛЕННЫМИ ОБЯЗАТЕЛЬНЫМИ ПОЛЯМИ -->
                <link rel="stylesheet" href="https://yookassa.ru/integration/simplepay/css/yookassa_construct_form.css?v=1.30.0">
                <form target="_blank" class="yoomoney-payment-form" action="https://yookassa.ru/integration/simplepay/payment" method="post" accept-charset="utf-8">

                    <!-- ДОБАВЛЕНО: Email для чека -->
                    <div class="ym-customer-info">
                        <div class="ym-block-title">Email для чека</div>
                        <input name="cps_email" class="ym-input" placeholder="ваш@email.com" type="email" required>
                    </div>

                    <!-- ДОБАВЛЕНО: customerNumber -->
                    <div class="ym-hidden-inputs">
                        <input name="shopSuccessURL" type="hidden" value="https://pddigfhufkrb.github.io/success.html">
                        <input name="customerNumber" type="hidden" value="pdd_customer">
                    </div>

                    <!-- ДОБАВЛЕНО: Товар для чека -->
                    <input type="hidden" name="orderDetails" value='{"items":[{"description":"Шпаргалка ПДД","quantity":"1","amount":{"value":"99.00","currency":"RUB"}}]}'>

                    <!-- ОРИГИНАЛЬНЫЙ КОД -->
                    <div class="ym-payment-btn-block">
                        <div class="ym-input-icon-rub ym-display-none">
                            <input name="sum" placeholder="0.00" class="ym-input ym-sum-input ym-required-input" type="number" step="any" value="99">
                        </div>
                        <button data-text="Заплатить" class="ym-btn-pay ym-result-price">
                            <span class="ym-text-crop">Заплатить</span>
                            <span class="ym-price-output"> 99,00&nbsp;₽</span>
                        </button>
                        <img src="https://yookassa.ru/integration/simplepay/img/iokassa-gray.svg?v=1.30.0" class="ym-logo" width="114" height="27" alt="ЮKassa">
                    </div>
                    
                    <input name="shopId" type="hidden" value="1194993">
                </form>
                <script src="https://yookassa.ru/integration/simplepay/js/yookassa_construct_form.js?v=1.30.0"></script>

                <div class="text-center mt-3">
                    <a href="index.html" class="btn btn-outline-secondary">Назад к шпаргалкам</a>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Получаем product_id из URL и сохраняем в localStorage
        const urlParams = new URLSearchParams(window.location.search);
        const productId = urlParams.get('product') || '1';
        localStorage.setItem('last_paid_product', productId);
    </script>
</body>
</html>
