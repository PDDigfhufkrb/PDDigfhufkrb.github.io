<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–û–ø–ª–∞—Ç–∞ —à–ø–∞—Ä–≥–∞–ª–∫–∏ –ü–î–î</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 500px;
            margin: 50px auto;
            padding: 20px;
        }
        .back-link {
            display: block;
            margin-bottom: 20px;
            text-decoration: none;
            color: #007bff;
        }
        .product-info {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .email-section {
            margin: 20px 0;
            padding: 15px;
            background: #f0f8ff;
            border-radius: 8px;
        }
        .email-input {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-sizing: border-box;
        }
        .test-mode {
            width: 100%;
            padding: 10px;
            margin-top: 20px;
            background: #ffc107;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <a href="product1.html" class="back-link">‚Üê –ù–∞–∑–∞–¥ –∫ —Ç–æ–≤–∞—Ä—É</a>
    
    <div class="product-info">
        <h2>–û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–Ω—è—Ç–∏—è –∏ —Ç–µ—Ä–º–∏–Ω—ã –ü–î–î</h2>
        <p><strong>–¶–µ–Ω–∞:</strong> 99 ‚ÇΩ</p>
        <p><small>–ü–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã —Ñ–∞–π–ª –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω—ã–π email</small></p>
    </div>

    <!-- –°–µ–∫—Ü–∏—è –¥–ª—è —Å–±–æ—Ä–∞ email -->
    <div class="email-section">
        <label for="customerEmail"><strong>Email –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–∞–π–ª–∞:</strong></label>
        <input type="email" id="customerEmail" class="email-input" placeholder="your@email.com" required>
        <p><small>–ù–∞ —ç—Ç–æ—Ç email –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ —Å—Å—ã–ª–∫–∞ –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è</small></p>
    </div>

    <!-- –§–û–†–ú–ê –ÆKASSA SIMPLEPAY -->
    <link rel="stylesheet" href="https://yookassa.ru/integration/simplepay/css/yookassa_construct_form.css?v=1.30.0">
    <form target="_blank" class="yoomoney-payment-form" action="https://yookassa.ru/integration/simplepay/payment" method="post" accept-charset="utf-8" onsubmit="return validateForm()">

        <!-- –°–∫—Ä—ã—Ç—ã–µ –ø–æ–ª—è –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö -->
        <div class="ym-hidden-inputs">
            <input name="shopSuccessURL" type="hidden" value="https://pddigfhufkrb.github.io/success.html">
            <input name="cps_email" id="cps_email_field" type="hidden" value="">
            <!-- –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å comment –¥–ª—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–ª–∞—Ç–µ–∂–∞ -->
            <input name="comment" type="hidden" value="–®–ø–∞—Ä–≥–∞–ª–∫–∞ –ü–î–î: –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–Ω—è—Ç–∏—è">
        </div>

        <!-- –ë–ª–æ–∫ —Å –∫–Ω–æ–ø–∫–æ–π –æ–ø–ª–∞—Ç—ã -->
        <div class="ym-payment-btn-block">
            <div class="ym-input-icon-rub ym-display-none">
                <input name="sum" placeholder="0.00" class="ym-input ym-sum-input ym-required-input" type="number" step="any" value="99">
            </div>
            <button type="submit" data-text="–ó–∞–ø–ª–∞—Ç–∏—Ç—å" class="ym-btn-pay ym-result-price">
                <span class="ym-text-crop">–ó–∞–ø–ª–∞—Ç–∏—Ç—å</span> 
                <span class="ym-price-output"> 99,00&nbsp;‚ÇΩ</span>
            </button>
            <img src="https://yookassa.ru/integration/simplepay/img/iokassa-gray.svg?v=1.30.0" class="ym-logo" width="114" height="27" alt="–ÆKassa">
        </div>
        
        <input name="shopId" type="hidden" value="1194993">
    </form>
    <script src="https://yookassa.ru/integration/simplepay/js/yookassa_construct_form.js?v=1.30.0"></script>

    <!-- –¢–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º -->
    <button onclick="quickBuy()" class="test-mode">
        üîß –¢–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º (–ø–æ–ª—É—á–∏—Ç—å –±–µ–∑ –æ–ø–ª–∞—Ç—ã)
    </button>

    <script>
        // –î–∞–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä–∞
        const product = {
            id: '1',
            name: '–û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–Ω—è—Ç–∏—è –∏ —Ç–µ—Ä–º–∏–Ω—ã –ü–î–î',
            price: 99,
            driveLink: 'https://drive.google.com/file/d/your-file-id-1/view?usp=sharing'
        };

        function validateForm() {
            const email = document.getElementById('customerEmail').value;
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º email
            if (!email || !email.includes('@')) {
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π email –∞–¥—Ä–µ—Å');
                return false;
            }

            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ –≤ localStorage
            localStorage.setItem('paid_product_id', product.id);
            localStorage.setItem('customer_email', email);
            localStorage.setItem('product_name', product.name);
            localStorage.setItem('product_drive_link', product.driveLink);

            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º email –≤ —Å–∫—Ä—ã—Ç–æ–µ –ø–æ–ª–µ —Ñ–æ—Ä–º—ã (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ –¥–ª—è –ÆKassa)
            document.getElementById('cps_email_field').value = email;

            console.log('–î–∞–Ω–Ω—ã–µ –¥–ª—è –æ–ø–ª–∞—Ç—ã:', {
                productId: product.id,
                email: email,
                product: product.name
            });

            return true;
        }

        function quickBuy() {
            const email = document.getElementById('customerEmail').value;
            
            if (!email || !email.includes('@')) {
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π email –¥–ª—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Ä–µ–∂–∏–º–∞');
                return;
            }

            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ
            localStorage.setItem('paid_product_id', product.id);
            localStorage.setItem('customer_email', email);
            localStorage.setItem('product_name', product.name);
            localStorage.setItem('product_drive_link', product.driveLink);
            localStorage.setItem('test_mode', 'true');

            // –ü–µ—Ä–µ—Ö–æ–¥–∏–º –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É —É—Å–ø–µ—Ö–∞
            window.location.href = 'success.html';
        }

        // –ê–≤—Ç–æ—Ñ–æ–∫—É—Å –Ω–∞ –ø–æ–ª–µ email
        document.getElementById('customerEmail').focus();
    </script>
</body>
</html>
