<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–Ω—è—Ç–∏—è –ü–î–î - –ü–î–î –®–ø–∞—Ä–≥–∞–ª–∫–∏</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .hero {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 60px 0;
        }
        .btn-buy {
            background: #28a745;
            border: none;
            padding: 15px 30px;
            font-size: 1.2rem;
        }
        .feature-list li {
            margin-bottom: 0.5rem;
        }
        .loading {
            display: none;
        }
        #payment-form {
            margin: 20px 0;
        }
    </style>
    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º –≤–∏–¥–∂–µ—Ç –ÆKassa -->
    <script src="https://yookassa.ru/checkout-widget/v1/checkout-widget.js"></script>
</head>
<body>
    <!-- –®–∞–ø–∫–∞ -->
    <nav class="navbar navbar-light bg-white shadow-sm">
        <div class="container">
            <a class="navbar-brand" href="index.html">
                ‚Üê –ù–∞–∑–∞–¥ –∫ —à–ø–∞—Ä–≥–∞–ª–∫–∞–º
            </a>
            <span class="navbar-text">
                üìö –ü–î–î –®–ø–∞—Ä–≥–∞–ª–∫–∏
            </span>
        </div>
    </nav>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
    <div class="container my-5">
        <div class="row">
            <div class="col-lg-8">
                <h1 class="mb-3">–û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–Ω—è—Ç–∏—è –∏ —Ç–µ—Ä–º–∏–Ω—ã –ü–î–î</h1>
                <p class="lead">–ö–ª—é—á –∫ –ø–æ–Ω–∏–º–∞–Ω–∏—é –≤—Å–µ—Ö –ø—Ä–∞–≤–∏–ª –¥–æ—Ä–æ–∂–Ω–æ–≥–æ –¥–≤–∏–∂–µ–Ω–∏—è. –í—Å—è —Å–ª–æ–∂–Ω–∞—è —Ç–µ—Ä–º–∏–Ω–æ–ª–æ–≥–∏—è –ø—Ä–æ—Å—Ç—ã–º —è–∑—ã–∫–æ–º.</p>
                
                <div class="mb-4">
                    <h4>üìñ –ß—Ç–æ –≤–Ω—É—Ç—Ä–∏ —à–ø–∞—Ä–≥–∞–ª–∫–∏?</h4>
                    <ul class="feature-list">
                        <li><strong>–ü—Ä–æ—Å—Ç–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ 15+ —Ç–µ—Ä–º–∏–Ω–æ–≤</strong> - "–£—Å—Ç—É–ø–∏—Ç—å –¥–æ—Ä–æ–≥—É", "–ì–ª–∞–≤–Ω–∞—è –¥–æ—Ä–æ–≥–∞", "–ü—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–µ" –∏ –¥—Ä—É–≥–∏—Ö</li>
                        <li><strong>–ß–µ—Ç–∫–∏–µ –æ—Ç–ª–∏—á–∏—è</strong> - —á–µ–º "–æ–±–≥–æ–Ω" –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç "–æ–ø–µ—Ä–µ–∂–µ–Ω–∏—è", "–æ—Å—Ç–∞–Ω–æ–≤–∫–∞" –æ—Ç "—Å—Ç–æ—è–Ω–∫–∏"</li>
                        <li><strong>–ù–∞–≥–ª—è–¥–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã</strong> - –∫–∞–∫ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –≥—Ä–∞–Ω–∏—Ü—ã –ø–µ—Ä–µ–∫—Ä–µ—Å—Ç–∫–∞, —á—Ç–æ —Å—á–∏—Ç–∞–µ—Ç—Å—è –ø—Ä–∏–ª–µ–≥–∞—é—â–µ–π —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–µ–π</li>
                        <li><strong>–ê–ª–≥–æ—Ä–∏—Ç–º—ã –±—ã—Å—Ç—Ä–æ–≥–æ –∑–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è</strong> - –º–Ω–µ–º–æ–Ω–∏—á–µ—Å–∫–∏–µ –ø—Ä–∞–≤–∏–ª–∞ –∏ –∞–Ω–∞–ª–æ–≥–∏–∏</li>
                        <li><strong>–¢–∞–±–ª–∏—Ü–∞-–ø–∞–º—è—Ç–∫–∞</strong> - –≤—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–Ω—è—Ç–∏—è –Ω–∞ –æ–¥–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ</li>
                    </ul>
                </div>

                <div class="mb-4">
                    <h4>üéØ –ü–æ—á–µ–º—É —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?</h4>
                    <p>–ù–µ –ø–æ–Ω–∏–º–∞—è –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ç–µ—Ä–º–∏–Ω–æ–≤, –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø—Ä–∏–º–µ–Ω—è—Ç—å –ø—Ä–∞–≤–∏–ª–∞. –≠—Ç–∞ —à–ø–∞—Ä–≥–∞–ª–∫–∞ –¥–∞–µ—Ç —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º —Å—Ç—Ä–æ–∏—Ç—Å—è –≤—Å–µ –¥–∞–ª—å–Ω–µ–π—à–µ–µ –æ–±—É—á–µ–Ω–∏–µ.</p>
                </div>
            </div>

            <div class="col-lg-4">
                <div class="card shadow">
                    <div class="card-body text-center">
                        <div class="mb-3">
                            <span class="h3 text-primary">99 ‚ÇΩ</span>
                        </div>
                        
                        <!-- –ö–Ω–æ–ø–∫–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è –æ–ø–ª–∞—Ç—ã -->
                        <button class="btn btn-buy btn-lg w-100 mb-3" onclick="showPaymentForm()">
                            üõí –ö—É–ø–∏—Ç—å —ç—Ç—É —à–ø–∞—Ä–≥–∞–ª–∫—É
                        </button>

                        <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –ø–ª–∞—Ç–µ–∂–Ω–æ–π —Ñ–æ—Ä–º—ã -->
                        <div id="payment-form" style="display: none;"></div>

                        <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ -->
                        <div id="loading" class="loading">
                            <div class="spinner-border text-primary" role="status">
                                <span class="visually-hidden">–ó–∞–≥—Ä—É–∑–∫–∞...</span>
                            </div>
                            <p class="mt-2">–ü–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ–º –æ–ø–ª–∞—Ç—É...</p>
                        </div>

                        <!-- –í—Ä–µ–º–µ–Ω–Ω–∞—è –∫–Ω–æ–ø–∫–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è -->
                        <button class="btn btn-warning btn-sm w-100 mt-2" onclick="quickBuy(1)">
                            üîß –¢–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º (–µ—Å–ª–∏ –æ–ø–ª–∞—Ç–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç)
                        </button>
                        
                        <small class="text-muted">
                            ‚úÖ –ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞<br>
                            ‚úÖ PDF-—Ñ–æ—Ä–º–∞—Ç<br>
                            ‚úÖ –ú–æ–∂–Ω–æ —Ä–∞—Å–ø–µ—á–∞—Ç–∞—Ç—å
                        </small>
                    </div>
                </div>

                <div class="card mt-3">
                    <div class="card-body">
                        <h6>üìä –ö–æ–º—É –æ—Å–æ–±–µ–Ω–Ω–æ –ø–æ–ª–µ–∑–Ω–∞?</h6>
                        <ul class="small mb-0">
                            <li>–ù–∞—á–∏–Ω–∞—é—â–∏–º –≤–æ–¥–∏—Ç–µ–ª—è–º</li>
                            <li>–¢–µ–º, –∫—Ç–æ –≥–æ—Ç–æ–≤–∏—Ç—Å—è –∫ —ç–∫–∑–∞–º–µ–Ω—É</li>
                            <li>–í–æ–¥–∏—Ç–µ–ª—è–º —Å–æ —Å—Ç–∞–∂–µ–º –¥–ª—è –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è</li>
                        </ul>
                    </div>
                </div>

                <div class="card mt-3">
                    <div class="card-body">
                        <h6>üîÑ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?</h6>
                        <ol class="small">
                            <li>–ù–∞–∂–∏–º–∞–µ—Ç–µ "–ö—É–ø–∏—Ç—å"</li>
                            <li>–û–ø–ª–∞—á–∏–≤–∞–µ—Ç–µ —á–µ—Ä–µ–∑ –ÆKass—É</li>
                            <li>–°—Ä–∞–∑—É –ø–æ–ª—É—á–∞–µ—Ç–µ PDF-—Ñ–∞–π–ª</li>
                            <li>–ò–∑—É—á–∞–µ—Ç–µ –∑–∞ 15 –º–∏–Ω—É—Ç</li>
                        </ol>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- –§—É—Ç–µ—Ä -->
    <footer class="bg-light py-4 mt-5">
        <div class="container text-center text-muted small">
            <p>üìß example@pdd.ru</p>
            <p class="mb-0"><a href="policy.html" class="text-muted">–ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</a></p>
        </div>
    </footer>

    <!-- –°–ö–†–ò–ü–¢ –î–õ–Ø –†–ê–ë–û–¢–´ –° –í–ò–î–ñ–ï–¢–û–ú –ÆKASS–´ -->
    <script>
        let checkoutWidget = null;

        async function showPaymentForm() {
            document.getElementById('loading').style.display = 'block';
            
            try {
                // –°–æ–∑–¥–∞–µ–º –ø–ª–∞—Ç–µ–∂ –∏ –ø–æ–ª—É—á–∞–µ–º confirmation_token
                const confirmationToken = await createPayment(1, 99);
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ñ–æ—Ä–º—É –æ–ø–ª–∞—Ç—ã
                document.getElementById('payment-form').style.display = 'block';
                document.getElementById('loading').style.display = 'none';
                
                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –≤–∏–¥–∂–µ—Ç
                initializeWidget(confirmationToken);
                
            } catch (error) {
                document.getElementById('loading').style.display = 'none';
                alert('–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø–ª–∞—Ç–µ–∂–∞: ' + error.message);
            }
        }

        async function createPayment(productId, price) {
            // –í–†–ï–ú–ï–ù–ù–û–ï –†–ï–®–ï–ù–ò–ï - –∏—Å–ø–æ–ª—å–∑—É–µ–º proxy –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–ª–∞—Ç–µ–∂–∞
            const proxyUrl = 'https://api.allorigins.win/raw?url=';
            const apiUrl = 'https://api.yookassa.ru/v3/payments';
            
            const shopId = '1194993';
            const secretKey = 'live_1w7Bjx1zewKyJ3-CUmjMuAv0eY_x9dI8byOmEuMibes';

            const paymentData = {
                amount: {
                    value: price.toFixed(2),
                    currency: "RUB"
                },
                capture: true,
                confirmation: {
                    type: "embedded"  // –í–∞–∂–Ω–æ: embedded –¥–ª—è –≤–∏–¥–∂–µ—Ç–∞!
                },
                description: "–®–ø–∞—Ä–≥–∞–ª–∫–∞ –ü–î–î: –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–Ω—è—Ç–∏—è –∏ —Ç–µ—Ä–º–∏–Ω—ã"
            };

            const response = await fetch(proxyUrl + encodeURIComponent(apiUrl), {
                method: 'POST',
                headers: {
                    'Authorization': 'Basic ' + btoa(shopId + ':' + secretKey),
                    'Content-Type': 'application/json',
                    'Idempotence-Key': Date.now().toString() + Math.random().toString(36).substr(2, 9)
                },
                body: JSON.stringify(paymentData)
            });

            const result = await response.json();
            
            if (result.confirmation && result.confirmation.confirmation_token) {
                return result.confirmation.confirmation_token;
            } else {
                throw new Error(result.description || '–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å –ø–ª–∞—Ç–µ–∂');
            }
        }

        function initializeWidget(confirmationToken) {
            // –£–Ω–∏—á—Ç–æ–∂–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–π –≤–∏–¥–∂–µ—Ç, –µ—Å–ª–∏ –µ—Å—Ç—å
            if (checkoutWidget) {
                checkoutWidget.destroy();
            }

            // –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π –≤–∏–¥–∂–µ—Ç
            checkoutWidget = new window.YooMoneyCheckoutWidget({
                confirmation_token: confirmationToken,
                return_url: 'https://pddigfhufkrb.github.io/success.html?product_id=1',
                error_callback: function(error) {
                    console.error('–û—à–∏–±–∫–∞ –≤–∏–¥–∂–µ—Ç–∞:', error);
                    alert('–û—à–∏–±–∫–∞ –ø–ª–∞—Ç–µ–∂–Ω–æ–π —Ñ–æ—Ä–º—ã: ' + error.message);
                }
            });

            // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –≤–∏–¥–∂–µ—Ç
            checkoutWidget.render('payment-form');
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (–º–∏–Ω—É—è –æ–ø–ª–∞—Ç—É)
        function quickBuy(productId) {
            localStorage.setItem('paid_product_id', productId.toString());
            window.location.href = 'success.html?product_id=' + productId;
        }
    </script>
</body>
</html>
